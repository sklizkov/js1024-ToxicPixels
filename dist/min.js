for(var r=Math,e=r.floor,o=a.width,t=a.height,f=64,i=e(r.min(o,t)/f),v=i*f,n=e((o-v)/2),l=e((t-v)/2),m=[],h=[],s={},d=(r,a)=>r[0]*a[0]+r[1]*a[1],u=r=>r*r*r*(r*(6*r-15)+10),y=(r,a,e)=>(1-e)*r+e*a,g=256;g--;)m[g]=m[g+256]=e(256*r.random()),h[g]=h[g+256]=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]][m[g]%8];var p=(r,a)=>{var o=e(r),t=e(a);return r-=o,a-=t,y(y(d(h[(o&=255)+m[t&=255]],[r,a]),d(h[o+1+m[t]],[r-1,a]),u(r)),y(d(h[o+m[t+1]],[r,a-1]),d(h[o+1+m[t+1]],[r-1,a-1]),u(r)),u(a))};a.onmousemove=r=>{var a=r.offsetX,o=r.offsetY,t=e((a-n)/i)+e((o-l)/i)*f;a>n&&a<n+v&&o>l&&o<l+v&&(s[t]=1)};var q=(a=0)=>{a*=2e-4;for(var e=4096;e--;){var o=e%f,t=e>>6,v=p(o/30+a,t/30+a)*p(o/45-a,t/45-a)*720;for(var m in s){var h=r.hypot(m%f-o,(m>>6)-t);v+=r.min(r.max(0,150-(8-2*r.sin(h*(.2+s[m])-25*a))*h),255)*s[m]*.1}s[e]&&s[e]>0?s[e]-=.01:delete s[e],c.fillStyle=`hsl(${v+64*a},50%,50%)`,c.fillRect(n+o*i,l+t*i,i,i)}requestAnimationFrame(q)};q();